"use strict";(self.webpackChunkPhilipMeadowsJohnson=self.webpackChunkPhilipMeadowsJohnson||[]).push([[661],{3905:function(e,t,r){r.d(t,{Zo:function(){return c},kt:function(){return m}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(r),m=o,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return r?n.createElement(h,i(i({ref:t},c),{},{components:r})):n.createElement(h,i({ref:t},c))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},817:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),i=["components"],l={title:"Implementation"},s=void 0,p={unversionedId:"developers/implementation",id:"developers/implementation",isDocsHomePage:!1,title:"Implementation",description:"Review existing implementations",source:"@site/docs/developers/implementation.md",sourceDirName:"developers",slug:"/developers/implementation",permalink:"/docs/developers/implementation",tags:[],version:"current",lastUpdatedBy:"Philip Johnson",lastUpdatedAt:1638467467,formattedLastUpdatedAt:"12/2/2021",frontMatter:{title:"Implementation"},sidebar:"someSidebar",previous:{title:"Developing processListings()",permalink:"/docs/developers/process-listings"},next:{title:"Production",permalink:"/docs/developers/production"}},c=[{value:"Review existing implementations",id:"review-existing-implementations",children:[],level:2},{value:"Copy the template",id:"copy-the-template",children:[],level:2},{value:"Add your scraper to the CLI",id:"add-your-scraper-to-the-cli",children:[],level:2},{value:"Implement the behavior",id:"implement-the-behavior",children:[],level:2}],u={toc:c};function d(e){var t=e.components,r=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"review-existing-implementations"},"Review existing implementations"),(0,a.kt)("p",null,"Before starting to implement your own scraper, check to make sure that you can run the NSF scraper successfully in your own environment. I suggest you read through the ",(0,a.kt)("inlineCode",{parentName:"p"},"Scraper.ts")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Scraper.nsf.ts")," files and make sure you understand the superclass and subclass relationship.  Notice how the NSF scraper methods frequently call the superclass method initially, then augment this behavior with additional code."),(0,a.kt)("h2",{id:"copy-the-template"},"Copy the template"),(0,a.kt)("p",null,"Next, make a copy of ",(0,a.kt)("inlineCode",{parentName:"p"},"scrapers/Scraper.template.ts"),", and replace 'template' by the name of your scraper. So, for example, ",(0,a.kt)("inlineCode",{parentName:"p"},"Scraper.glassdoor.ts"),". Edit the file as follows:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'Fix the class name (for example, to "GlassDoorScraper")'),(0,a.kt)("li",{parentName:"ul"},"Fix the name field on line 7 from 'template' to your scraper name (for example, to 'glassdoor'). Keep the scraper name lower case, all one word, no hyphens. This will make it easier for the CLI.")),(0,a.kt)("h2",{id:"add-your-scraper-to-the-cli"},"Add your scraper to the CLI"),(0,a.kt)("p",null,"Next, update ",(0,a.kt)("inlineCode",{parentName:"p"},"main.ts")," so that the CLI knows about your scraper. Edit the file as follows:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Add an import of your new scraper (for example, ",(0,a.kt)("inlineCode",{parentName:"li"},"import { GlassDoorScraper } from './scrapers/Scraper.glassdoor';"),")"),(0,a.kt)("li",{parentName:"ul"},"Update the ",(0,a.kt)("inlineCode",{parentName:"li"},"scrapers")," object definition to include a new field and value for your scraper. For example, ",(0,a.kt)("inlineCode",{parentName:"li"},"glassdoor: new GlassDoorScraper(),"))),(0,a.kt)("p",null,"Next, test the CLI to see if it understands your scraper. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npm run scrape -- -s glassdoor -l debug\n")),(0,a.kt)("p",null,"You should get a few lines of output and no errors."),(0,a.kt)("h2",{id:"implement-the-behavior"},"Implement the behavior"),(0,a.kt)("p",null,'Finally, the "easy" part. Migrate the scraper code from the old version of the system into this new format.  There are some CLI options to help you, such as ',(0,a.kt)("inlineCode",{parentName:"p"},"--no-headless"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"--devtools"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"--slowmo"),", and so forth."),(0,a.kt)("p",null,"Check out the nsf scraper for hints.  There is some code (such as the array spread operator) which works in the old version of the system, but which I had to replace with a call to forEach in version 2 since the new version uses Typescript.  If you run into difficulties where code works in the old version but not here and you can't figure it out, don't hesitate to ask for help."),(0,a.kt)("p",null,"To see if your scraper is working, compare the output file it writes into the listings directory to the output file in scraper/data/canonical. Note that there are a few fields (start, end, compensation, qualifications, skills, remote) that are not currently of interest.  Use the type definition of the Listing object to see what fields we are currently hoping to extract."),(0,a.kt)("p",null,"Make sure that your code passes lint:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"npm run lint\n")))}d.isMDXComponent=!0}}]);