<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Basic Invocation | PhilipMeadowsJohnson</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://philipmeadowsjohnson.github.io/docs/developers/invocation"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Basic Invocation | PhilipMeadowsJohnson"><meta data-react-helmet="true" name="description" content="npm run scrape -- -s"><meta data-react-helmet="true" property="og:description" content="npm run scrape -- -s"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://philipmeadowsjohnson.github.io/docs/developers/invocation"><link data-react-helmet="true" rel="alternate" href="https://philipmeadowsjohnson.github.io/docs/developers/invocation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://philipmeadowsjohnson.github.io/docs/developers/invocation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.886598a2.css">
<link rel="preload" href="/assets/js/runtime~main.ee325d5f.js" as="script">
<link rel="preload" href="/assets/js/main.779c6d1f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/internaloha-logo.png" alt="InternAloha" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/internaloha-logo.png" alt="InternAloha" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">PhilipMeadowsJohnson</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview/motivation">Documentation</a><a href="https://github.com/internaloha/scrapers/projects/1" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Project Board<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/internaloha" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Developer Guide</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developers/invocation">Basic Invocation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/process-listings">Developing processListings()</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/implementation">Implementation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/production">Production</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/tips">Developer Tips</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/legal">Legal Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/test-scraper">The &quot;Test&quot; Scraper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/resources">Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developers/review-2021-11-08">Review (2021-11-08)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pilot Studies</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Basic Invocation</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="npm-run-scrape-----s-scraper"><code>npm run scrape -- -s &lt;scraper&gt;</code><a aria-hidden="true" class="hash-link" href="#npm-run-scrape-----s-scraper" title="Direct link to heading">â€‹</a></h2><p>This is the simplest version of the script, which runs a single scraper. For example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npm run scrape -- -s nsf</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Currently, this command produces the following output:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run scrape -- -s nsf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; scraper@2.0.0 scrape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ts-node -P tsconfig.buildScripts.json scrape.ts &quot;-s&quot; &quot;nsf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:19:24 WARN NSF Launching NSF scraper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:19:41 INFO NSF Wrote 100 listings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:19:41 INFO NSF Wrote statistics.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You will see that a file called <code>nsf.dev.json</code> has been written to the <code>listings/compsci</code> directory, and a file called (for example) <code>nsf-2021-10-18.dev.json</code> has been written to the <code>statistics/compsci</code> directory.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="npm-run-scrape------help"><code>npm run scrape -- --help</code><a aria-hidden="true" class="hash-link" href="#npm-run-scrape------help" title="Direct link to heading">â€‹</a></h2><p>There are many options for customizing the run of a scraper.  To see them, invoke help:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">npm run scrape -- --help</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here is the output from a recent run. There may be additional options or changes in your version.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run scrape -- --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; scraper@2.0.0 scrape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ts-node -P tsconfig.buildScripts.json scrape.ts &quot;--help&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: scrape [options]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -s, --scraper &lt;scraper&gt;                Specify the scraper. (choices: &quot;angellist&quot;, &quot;apple&quot;, &quot;cisco&quot;, &quot;linkedin&quot;, &quot;nsf&quot;, &quot;simplyhired&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         &quot;test&quot;, &quot;ziprecruiter&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -l, --log-level &lt;level&gt;                Specify logging level (choices: &quot;trace&quot;, &quot;debug&quot;, &quot;info&quot;, &quot;warn&quot;, &quot;error&quot;, default: &quot;info&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d, --discipline &lt;discipline&gt;          Specify what types of internships to find (choices: &quot;compsci&quot;, &quot;compeng&quot;, default: &quot;compsci&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c, --config-file &lt;config-file&gt;        Specify config file name. (default: &quot;config.json&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -nh, --no-headless                     Disable headless operation (display browser window during execution)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -dt, --devtools                        Open a devtools window during run. (default: false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -cf, --commit-files                    Write listing and statistic files that are not git-ignored. (default: false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -sm, --slowMo &lt;milliseconds&gt;           Pause each puppeteer action by the provided number of milliseconds. (default: &quot;0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -t,  --default-timeout &lt;seconds&gt;       Set default timeout in seconds for puppeteer. (default: &quot;0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -ld, --listing-dir &lt;listingdir&gt;        Set the directory to hold listing files. (default: &quot;./listings&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -ml, --minimum-listings &lt;minlistings&gt;  Throw error if this number of listings not found. (default: &quot;0&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -sd, --statistics-dir &lt;statisticsdir&gt;  Set the directory to hold statistics files. (default: &quot;./statistics&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -vph, --viewport-height &lt;height&gt;       Set the viewport height (when browser displayed). (default: &quot;700&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -vpw, --viewport-width &lt;width&gt;         Set the viewport width (when browser displayed). (default: &quot;1000&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h, --help                             display help for command</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can provide any combination of these parameters, in any order.  The only required parameter is the scraper.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="multi-scraper-invocation">Multi-scraper invocation<a aria-hidden="true" class="hash-link" href="#multi-scraper-invocation" title="Direct link to heading">â€‹</a></h2><p>In the previous version of the scraper, we discovered that puppeteer is not &quot;thread safe&quot;, in the sense that running multiple scrapers simultaneously can result in execution errors that do not appear when running each scraper individually.</p><p>To avoid this problem, the <code>scrape</code> script supports running of only a single scraper. To support batch execution of multiple scrapers, we have created a Unix shell script (run-scrapers.sh) that invokes the <code>scrape</code> script multiple times, once per scraper. This will isolate each run of the scraper in its own OS process and prevent these sorts of problems from occurring.</p><p>The problem with run-scrapers.sh is that it serializes execution, so the overall time to run the scrapers is sum of all individual execution times.  A simple way to reduce the overall time is to create one shell per scraper and invoke each scraper in each shell manually. It takes a couple of minutes to set it up, but now the overall time to run all of the scrapers is reduced to the time required to run the slowest scraper. Here&#x27;s a screenshot illustrating this technique:</p><img src="/img/scrapers-multiple-windows.png"><p>Note that after running the scrapers like this, you must run the statistics script manually to collect the data:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run statistics -- -cf true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; scraper@2.0.0 statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ts-node -P tsconfig.buildScripts.json statistics.ts &quot;-cf&quot; &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wrote statistics/compsci/statistics.num-listings.csv.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wrote statistics/compsci/statistics.num-errors.csv.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wrote statistics/compsci/statistics.elapsed-time.csv.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>After that, be sure to commit the listings and statistics files to GitHub.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="example-nsf-scraper">Example: NSF Scraper<a aria-hidden="true" class="hash-link" href="#example-nsf-scraper" title="Direct link to heading">â€‹</a></h2><p>Here is the default run of the NSF scraper. The log level defaults to &#x27;info&#x27;, so there&#x27;s very little output.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run scrape -- -s nsf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; scraper@2.0.0 scrape</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ts-node -P tsconfig.buildScripts.json scrape.ts &quot;-s&quot; &quot;nsf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12:21:06 WARN NSF Launching NSF scraper</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12:21:10 INFO NSF Wrote 100 listings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12:21:10 INFO NSF Wrote statistics.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Running the scraper with log level &#x27;debug&#x27; produces a lot of output, much of which I&#x27;ll elide:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run scrape -- -s nsf -l debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; scraper@2.0.0 scrape /Users/philipjohnson/github/internaloha/internaloha/scrapers-v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ts-node -P tsconfig.buildScripts.json main.ts &quot;-s&quot; &quot;nsf&quot; &quot;-l&quot; &quot;debug&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:17 DEBUG root Starting launch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:18 INFO NSF Launching scraper.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:18 DEBUG NSF Starting login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:20 DEBUG NSF Starting generate listings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 DEBUG NSF URLS:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://engineering.asu.edu/sensip/reu-index-html/,https://web.asu.edu/imaging-lyceum/visual-media-reu,http://www.eng.auburn.edu/comp/research/impact/,http://www.eng.auburn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 DEBUG NSF Positions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sensor Signal and Information Processing (SenSIP),Computational Imaging and Mixed-Reality for Visual Media Creation and Visualization,Research Experience for Undergraduate on Smart UAVs,REU Site: Parallel and Distributed Computing,Data-driven Security,Undergraduate Research Experiences in Big Data Security and Privacy,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 DEBUG NSF Descriptions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Research Topics/Keywords: Sensors and signal processing algorithms, sensor design and fabrication, signal processing, wearable and flexible sensors, machine learning, interface circuits, sensors for Internet of Things</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 DEBUG NSF Locations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tempe, Arizona,Arizona,Auburn, Alabama,Auburn, Alabama,Boise, Idaho,Pomona, California,Pittsburgh, Pennsylvania,Pittsburgh, Pennsylvania,Potsdam, New York</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 DEBUG NSF Starting processListings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 DEBUG NSF Starting write listings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 INFO NSF Wrote data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 DEBUG NSF Starting write statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:45:22 DEBUG NSF Starting close</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="multi-discipline-support">Multi-discipline support<a aria-hidden="true" class="hash-link" href="#multi-discipline-support" title="Direct link to heading">â€‹</a></h2><p>The scrape script provides a --discipline parameter that defaults to &quot;compsci&quot; but also supports &quot;compeng&quot;. The value of this parameter is available to each scraper in a field called &quot;discipline&quot;.  Each scraper can consult the value of the discipline field and alter their search behavior if they want to implement discipline-specific internship listings.</p><p>The discipline parameter also affects where the choice of directory where the listing and statistics files are written. The compsci files are written into <code>listings/compsci</code> and <code>statistics/compsci</code>. The compeng files are written into <code>listings/compeng</code> and <code>statistics/compeng</code>.</p><p>At this time, the scrapers do not change their behavior according to the value of the --discipline parameter. So, if you call the scrape script with &quot;--discipline compeng&quot;, the only impact will be to write out the listing and statistics files to a different subdirectory.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="generating-statistics">Generating statistics<a aria-hidden="true" class="hash-link" href="#generating-statistics" title="Direct link to heading">â€‹</a></h2><p>Each time you run a scraper, a json file is written to a subdirectory of <code>/statistics</code> containing information about that run. The file name contains the timestamp YYYY-MM-DD, so statistics are only maintained for the last run of the day.</p><p>For example, here are the contents of <code>statistics/compsci/nsf-2021-10-08.dev.json</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;date&quot;: &quot;2021-10-08&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;elapsedTime&quot;: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;numErrors&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;numListings&quot;: 99,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scraper&quot;: &quot;nsf&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;errorMessages&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can run the &quot;statistics&quot; script to read all of the files in the statistics directory and generate a set of CSV files that provide historical trends for the scrapers:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; scraper@2.0.0 statistics /Users/philipjohnson/github/internaloha/internaloha/scrapers-v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ts-node -P tsconfig.buildScripts.json statistics.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wrote statistics/compsci/statistics.num-listings.dev.csv.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wrote statistics/compsci/statistics.num-errors.dev.csv.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wrote statistics/compsci/statistics.elapsed-time.dev.csv.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>During development, statistics files are generated with a &quot;.dev.csv&quot; extension. This means you can look at them, but they are not committed to GitHub.</p><p>Running the statistics script with the --commit-files flag eliminates the &quot;.dev&quot; suffix component and thus allows the statistics files to be committed to GitHub.</p><p>You can browse to those files directory to obtain a usable tabular representation of run data.</p><p>Invoke the statistics script with the <code>--help</code> option to see all available options:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ npm run statistics -- -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; scraper@2.0.0 statistics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; ts-node -P tsconfig.buildScripts.json statistics.ts &quot;-h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: statistics [options]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -l, --log-level &lt;level&gt;                Specify logging level (choices: &quot;trace&quot;, &quot;debug&quot;, &quot;info&quot;, &quot;warn&quot;, &quot;error&quot;, default: &quot;warn&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d, --discipline &lt;discipline&gt;          Specify what types of internships to find (choices: &quot;compsci&quot;, &quot;compeng&quot;, default: &quot;compsci&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -sd, --statistics-dir &lt;statisticsdir&gt;  Set the directory to hold statistics files. (default: &quot;./statistics&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -cf, --commit-files                    Write listing and statistic files that are not git-ignored. (default: false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -h, --help                             display help for command</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="development-mode">Development mode<a aria-hidden="true" class="hash-link" href="#development-mode" title="Direct link to heading">â€‹</a></h2><p>During development, people will be running scrapers and generating both listing and statistics &quot;output&quot; files in their branches.  This could lead to lots of spurious merge conflicts when trying to merge your branches back into main.</p><p>To avoid this problem, both the scrape and statistics scripts have a flag called &quot;--commit-files&quot; which is (currently) false by default.  When false, all listing file names have a &quot;.dev.json&quot; suffix, and all statistics file names have a &quot;.dev.csv&quot; suffix.  Both of these suffixes are git-ignored, with the result that all output files you create during development are not committed to your branch or to main.</p><p>If you want your data files to be committed, then you just run either script with the option &quot;--commit-files&quot;, which makes that flag true. Then the associated output files are created with &quot;.json&quot; (rather than &quot;.dev.json&quot;) or &quot;.csv&quot; (rather than &quot;.dev.csv&quot;), and so they will not be git-ignored.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/developers/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/developers/process-listings"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Developing processListings()<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#npm-run-scrape-----s-scraper" class="table-of-contents__link toc-highlight"><code>npm run scrape -- -s &lt;scraper&gt;</code></a></li><li><a href="#npm-run-scrape------help" class="table-of-contents__link toc-highlight"><code>npm run scrape -- --help</code></a></li><li><a href="#multi-scraper-invocation" class="table-of-contents__link toc-highlight">Multi-scraper invocation</a></li><li><a href="#example-nsf-scraper" class="table-of-contents__link toc-highlight">Example: NSF Scraper</a></li><li><a href="#multi-discipline-support" class="table-of-contents__link toc-highlight">Multi-discipline support</a></li><li><a href="#generating-statistics" class="table-of-contents__link toc-highlight">Generating statistics</a></li><li><a href="#development-mode" class="table-of-contents__link toc-highlight">Development mode</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">InternAloha is sponsored by:<br>
                  <a href="http://csdl.ics.hawaii.edu">Collaborative Software Development Laboratory</a><br>
                  <a href="http://www.ics.hawaii.edu">Department of Information and Computer Sciences</a><br>
                  <a href="http://www.hawaii.edu">University of Hawaii</a><br>
                  with funding from the National Science Foundation (Awards 1829542, 2025112)</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ee325d5f.js"></script>
<script src="/assets/js/main.779c6d1f.js"></script>
</body>
</html>